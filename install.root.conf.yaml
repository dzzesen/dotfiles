- defaults:
    link:
      relink: true
      create: true

- clean:
    /etc/keyd:
    /etc/ly/config.ini:
    /etc/pacman.conf:
    /bin/open-lazygit:
    /bin/open-yazi:
    /bin/open-git-history:
    /bin/open-git-diff:

- link:
    /etc/keyd/default.conf:
      path: configs/keyd/default.conf
    /etc/ly/config.ini:
      path: configs/ly/config.ini
      force: true
    /etc/pam.d/ly:
      path: configs/ly/pam
      force: true
    /etc/pacman.conf:
      path: configs/paru/pacman.conf
      force: true
    /bin/open-lazygit:
      path: configs/foot/open-lazygit.sh
    /bin/open-yazi:
      path: configs/foot/open-yazi.sh
    /bin/open-git-history:
      path: configs/foot/open-git-history.sh
    /bin/open-git-diff:
      path: configs/foot/open-git-diff.sh

- shell:
    - command: sudo systemctl enable keyd
    - command: sudo keyd reload
    - command: sudo systemctl enable ly@tty2.service
    - command: sudo systemctl disable getty@tty2.service
    - command: sudo chsh -s /bin/zsh
